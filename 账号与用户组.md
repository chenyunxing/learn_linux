## 账号与用户组
### 系统中一个用户存在两种id，一个UID为用户id，一个GID为组ID
### 原本ID在系统存在形式是数字类型，一般用ls -al之类显示的时候，会现在/etc/passwd与/etc/group的内容通过ID获取到账号名字，然后对应显示
* 验证，可以vi /etc/passwd，将里面用户名对应数字修改一下，随后查看ls -al这个用户的文件，然后可以发现显示的只是一个数字，因为在文件里存的权限是这个数字，但是在/etc/passwd里查询不到对应的用户，只能显示一个数字。注意这个是十分危险的，因为查询不到对应的用户，因此有些关于此用户的东西无法执行，严重者可能影响系统运行。
* 查询是否存在用户，id 用户名，如果有这个用户则会输出相关信息

### 用户登录的流程
* 1、首先会读取/etc/passwd里是否有输入的账号，没有就直接退出，有就读取对应的UID，然后在/etc/group里读取GID，另外家目录地址与shell设置也一并读出。
* 2、然后会核对密码表，会进入/etc/shadow里找出对应的账号与UID，然后核对密码【这个文件中密码经过加密，非明文，一般比较难破解。但是并非不可破】
* 3、如果一切正确就会进入shell界面
* 如果想知道/etc/passwd与/etc/shadow这些文件说明，可以man 5 passwd与man 5 shadow
* /etc/passwd构造是，每一行代表一个账号，有几行就戴白偶几个账号在系统中，不过需要特别留意的是，有很多账号是系统运行必须账号，可以称为系统账号。比如有bin,daemon,adm,nobody这些，这些不能随意删除
* 一般/etc/passwd文件第一行就是root默认UID是0

### /etc/passwd文件的构造
* 每一行用：分隔，有七个东西。比如root:x:0:0:root:/root:/bin/bash    \n adm:x:3:4:adm:/var/adm:/sbin/nologin
* 1、账号名称，用来对应UID的【第三个字段】
* 2、密码，早起linux密码用于这个字段，但是这个文件特性是所有程序都可以读取，并不安全，因此改到/etc/shadow里，所以这里都变成一个[x]
* 3、UID，UID的范围【0表示root系统管理员，如果希望给其他用户管理园区哪像你，可以把这个账号UID改成0，但是很推荐这个做法，inward这样容易系统管理员混乱并且也不安全】【1-999系统账号，默认1000以下的数字给系统账号是一个习惯，权限并没有什么特殊的。一般这些系统账号不可的呢路过，只是给予系统的一些服务用较小的权限执行。1-200：linux系统自行简历的系统账号，201-999用户有系统账号需求，可使用的UID】【1000-60000，给予一般用户使用的，事实上UID在高级版本已经可以支持到2^32-1这么大的号码了】
* 4、GID，这个与/etc/group有关，两个文件概念差不多，只是group文件用来规范组名与GID的对应。
* 5、用户信息说明栏，这个字段没有什么重要用途，只是解释这个账号的意义。如果提供使用finger这个功能，那么这个字段可以提供信息。
* 6、家目录，这个只是提供家目录的地址，其实可以修改这个字段，让家目录变地方。一般用于空间不足，想移动到其他硬盘。
* 7、shell，shell的环境有多个，比如这里的/bin/bash与/sbin/nologin，第一个表示一种shell环境，还有其他环境可以选择。第二个表示登录是无法获得shell环境。

### /etc/shadow文件结构
* 以:作为分割符，一共有9个字段
* 1、账号名称
* 2、密码，这里的密码是真正的密码，并且是经过编码的摘要，所以这个文件的权限限制只能root用户修改，注意不要改到这个文件权限，不然容易造成密码泄露
* 3、最近修改密码的日期，这里的数字如果是16559之而立代表2015-05-04这一天，这个数字代表距离1970-01-01这一天多久  
可以用 echo $(($(date --date="2015/05/04" + %s) / 86400 + 1))来获取
* 4、密码不可被修改的日期【与3比较】，设置为0 代表随时可以修改，设置为20，代表修改密码后20天内不能修改密码
* 5、密码需要重新修改的日期【与3比较】，与上面一样，不过含义是，必须在这个天数内重新设置你的密码，不然这个账号的密码就会变成过期特性。
* 6、密码需要修改期限前的警告天数【与5相比】，代表在密码有效期快到前几天要警告用户需要更行密码，为一个数字n
* 7、密码过期后的账号宽限时间（密码失效日）【与5相比】，在5中限制的时间里没有更新密码，就算密码过期了，进入过期特性，在过期特性中用户可以用原密码登录系统，但是登录后会强制要求重新设置密码才能继续使用。在失效日前未修改密码，那么就会密码失效，再也无法使用这个密码登录
* 8、账号失效日期，与第三个字段一样，都是以1970年来的天数，这个字段表示，在这个规定日期后再也不允许使用。这个条目一般用于收费项目的系统中，超过期限后不允许用户继续使用
* 9、保留字段，看以后有没有新功能。

### 用户遗忘密码
* 一般用户可以用root登录，然后使用passwd命令修改密码
* root遗忘密码，可以重新启动后，进入单人维护模式，这时系统会给予root权限的bash接口，这是就可以用passwd修改密码。或者用Live CD 启动后，挂载根目录去修改/etc/shadow，将里面root密码清空，然后重新启动后，root可以不用密码登录，然后在那个时候使用passwd修改密码。

### 加密方式
可以用命令，authconfig --test | grep hashing查看密码的加密方式
